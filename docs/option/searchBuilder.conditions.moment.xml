<?xml version="1.0" encoding="UTF-8" ?>
<dt-option library="SearchBuilder">
	<name>searchBuilder.conditions.moment</name>
	<summary>An array of objects containing the conditions for columns that are using moment</summary>
	<since>SearchBuilder 0.0.1</since>

	<type type="object[]">
		<description>
            An `-type object[]` that holds the details of the conditions for columns that are using moment.
        </description>
	</type>

	<default value="array">
        The default value for the `-init searchBuilder.conditions.moment` option is an `-type object[]` where the objects are in the form of `-init searchBuilder.conditions[type]`.
	</default>
	<description>
		<![CDATA[
		This is useful as it allows extra moment date conditions to be defined that can add to the filtering options. The custom condition defined in the example will override the `=` condition in the built in type `moment`'s condition set.

        More details on the structure that is used can be found at `-init searchBuilder[type]`
        ]]>
	</description>

	<example title="Simple extra date condition"><![CDATA[

    $('#example').DataTable( {
        dom: 'Qfrtip',
        searchBuilder: {
            conditions: {
                "moment":{
                    '=': {
                        isInputValid: function (el, that) {
                            let allFilled = true;
                            for (let element of el) {
                                if ($(element).is('input') && $(element).val().length === 0) {
                                    allFilled = false;
                                }
                            }

                            return allFilled;
                        }
                        conditionName: 'Made up',
                        inputValue: function (el) {
                            let values = [];

                            for (let element of el) {
                                if ($(element).is('input')) {
                                    values.push(moment($(element).val()).format(that.s.momentFormat));
                                }
                            }
                            
                            return values;
                        },
                        init: function (that, fn, preDefined) {
                            let el = $('<input/>').addClass(Criteria.classes.value).addClass(Criteria.classes.input).dtDateTime();

                            el.on('input', function() {fn(that, el)});

                            if (preDefined !== undefined) {
                                $(el).val(preDefined[0]);
                            }

                            return el;
                        },
                        search: function (value, comparison, that) {
                            return moment(value, that.s.momentFormat).valueOf() === moment(comparison[0], that.s.momentFormat).valueOf();
                        }
                    }
                }
            }
        }
    });

]]></example>

<related type="init">searchBuilder.conditions[type]</related>

</dt-option>
